# WPF Application UI Structure

## Main Window Layout

```
┌──────────────────────────────────────────────────────────────────────────────────┐
│  プログラム仕様書作成アプリケーション - Specification Document Generator          │
├──────────────────────────────────────────────────────────────────────────────────┤
│  ┌─ 設定 / Configuration ─────────────────────────────────────────────────────┐ │
│  │                                                                             │ │
│  │  対象フォルダ: [___________________________________________] [参照...]      │ │
│  │  出力先:       [___________________________________________] [参照...]      │ │
│  │  除外パターン: [bin,obj,node_modules,.git,.vs______________]               │ │
│  │  言語フィルタ: [____________________________________________]               │ │
│  │                                                                             │ │
│  └─────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                  │
│  ┌─────────────────────┐  ┌────────────────────────────────────────────────┐  │
│  │ ファイル一覧 / Files│  │ 進捗 / Progress                                │  │
│  ├─────────────────────┤  ├────────────────────────────────────────────────┤  │
│  │ ファイル数: 10      │  │ フェーズ: コード解析                           │  │
│  │ 要素数: 45          │  │ コードを解析しています...                      │  │
│  ├─────────────────────┤  │ [████████████░░░░░░░░░░░░░░░░░░] 40%           │  │
│  │ ファイル名 |言語|行│  │                                                 │  │
│  ├─────────────────────┤  ├─ プレビュー / Preview ───────────────────────┤  │
│  │ Main.cs    |C#  |120│  │ ┌─概要─┬─機能仕様─┬─API仕様─┬─データ構造─┐ │  │
│  │ Utils.cs   |C#  | 80│  │ │                                          │ │  │
│  │ test.py    |Py  | 50│  │ │  【プロジェクト名】                       │ │  │
│  │ app.js     |JS  |200│  │ │  TestProject                             │ │  │
│  │ ...        |... |...│  │ │                                          │ │  │
│  │                     │  │ │  【概要】                                 │ │  │
│  │                     │  │ │  このプロジェクトは...                    │ │  │
│  │                     │  │ │                                          │ │  │
│  │                     │  │ │  【主要機能】                             │ │  │
│  │                     │  │ │  - 機能1                                 │ │  │
│  │                     │  │ │  - 機能2                                 │ │  │
│  │                     │  │ │                                          │ │  │
│  └─────────────────────┘  │ └──────────────────────────────────────────┘ │  │
│                            └────────────────────────────────────────────────┘  │
│                                                                                  │
│  ┌─ 操作 / Controls ───────────────────────────────────────────────────────┐  │
│  │                                                                           │  │
│  │  [開始/Start] [一時停止/Pause] [再開/Resume] [キャンセル/Cancel]         │  │
│  │                                                           [設定/Settings] │  │
│  │                                                                           │  │
│  └───────────────────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────────────────────┘
```

## Settings Window Layout

```
┌────────────────────────────────────────────────────────────┐
│  設定 / Settings                                            │
├────────────────────────────────────────────────────────────┤
│  ┌─ LLM設定 ─┬─ 処理設定 ─┐                              │
│  │                          │                              │
│  │  ┌─ プロバイダ / Provider ────────────────────────┐   │
│  │  │                                                  │   │
│  │  │  ⦿ Azure OpenAI                                 │   │
│  │  │  ○ ローカルLLM (Ollama) [今後実装予定]          │   │
│  │  │                                                  │   │
│  │  └──────────────────────────────────────────────────┘   │
│  │                                                          │
│  │  ┌─ Azure OpenAI 設定 ────────────────────────────┐   │
│  │  │                                                  │   │
│  │  │  エンドポイント: [_____________________]         │   │
│  │  │  APIキー:       [••••••••••••••••••••••]         │   │
│  │  │  デプロイ名:     [gpt-4_________________]        │   │
│  │  │                                                  │   │
│  │  │  [接続テスト]  ※環境変数として保存されます      │   │
│  │  │                                                  │   │
│  │  └──────────────────────────────────────────────────┘   │
│  │                                                          │
│  │  ┌─ LLMパラメータ ─────────────────────────────────┐   │
│  │  │                                                  │   │
│  │  │  温度 (Temperature):  [━━━━●━━━━━━] 0.7        │   │
│  │  │  最大トークン数:      [━━━━━●━━━━━] 4000       │   │
│  │  │                                                  │   │
│  │  └──────────────────────────────────────────────────┘   │
│  │                                                          │
│  └──────────────────────────────────────────────────────────┘
│                                                              │
│                                    [保存/Save] [読込/Load]  │
│                                              [閉じる/Close]  │
└────────────────────────────────────────────────────────────┘
```

## Preview Tabs Structure

The preview area contains 8 tabs showing different sections of the generated specification:

1. **概要 (Overview)**
   - プロジェクト名
   - バージョン
   - 生成日時
   - 概要説明

2. **機能仕様 (Functional Specifications)**
   - 機能ID
   - 機能名
   - 概要
   - 入力/出力
   - 前提条件

3. **API仕様 (API Specifications)**
   - カテゴリ
   - API名
   - 入力/出力
   - 説明

4. **データ構造 (Data Structures)**
   - クラス名
   - フィールド名
   - データ型
   - 説明
   - 参照

5. **依存関係 (Dependencies)**
   - モジュール名
   - 依存先
   - タイプ (Internal/External)
   - バージョン
   - 備考

6. **テスト観点 (Test Perspectives)**
   - テストID
   - 機能名
   - 期待結果
   - 前提条件
   - 備考

7. **リスク (Risks)**
   - リスクID
   - 内容
   - 影響度
   - 発生確率
   - 対策

8. **変更履歴 (Change History)**
   - バージョン
   - 日付
   - 変更内容
   - 作成者

## Workflow Diagram

```
┌──────────────┐
│   ユーザー   │
└──────┬───────┘
       │
       ├─1─→ フォルダ選択
       │
       ├─2─→ 設定変更 (オプション)
       │
       ├─3─→ 「開始」ボタンクリック
       │
       ▼
┌──────────────────────┐
│  非同期解析プロセス   │
├──────────────────────┤
│  Phase 1: スキャン    │ ─→ [████░░░░░░] 5%
│  Phase 2: 解析        │ ─→ [████████░░] 40%
│  Phase 3: チャンク化  │ ─→ [██████████] 50%
│  Phase 4: 要約        │ ─→ [████████████] 75%
│  Phase 5: 仕様書生成  │ ─→ [██████████████] 90%
│  Phase 6: Excel出力   │ ─→ [████████████████] 100%
└──────┬───────────────┘
       │
       ├─→ プレビュー更新 (リアルタイム)
       │
       ├─→ 進捗表示更新
       │
       ▼
┌──────────────┐
│ Excel出力完了 │
└──────────────┘
       │
       ▼
  メッセージ表示
```

## Key UI Components

### Input Controls
- **TextBox**: 各種入力フィールド
- **Button**: 各種操作ボタン
- **FolderBrowserDialog**: フォルダ選択ダイアログ (Windows Forms)
- **SaveFileDialog**: ファイル保存ダイアログ (WPF)

### Display Controls
- **DataGrid**: ファイル一覧表示
- **ProgressBar**: 進捗バー
- **TabControl**: プレビュータブ
- **Label**: 各種ラベル
- **TextBlock**: 読み取り専用テキスト表示

### Layout Controls
- **Grid**: メインレイアウト
- **StackPanel**: 垂直/水平配置
- **GroupBox**: セクション区切り
- **ScrollViewer**: スクロール可能エリア
- **GridSplitter**: サイズ調整可能な区切り

## Color Scheme

### Main Window
- Background: White (#FFFFFF)
- Headers: Light Gray (#F0F0F0)
- Borders: Gray (#CCCCCC)
- Progress Bar Fill: Green (#4CAF50)
- Start Button: Green (#4CAF50) with white text

### Status Colors
- Success: Green
- Warning: Orange
- Error: Red
- Info: Blue

## Accessibility Features

- **Keyboard Navigation**: All controls support Tab navigation
- **Focus Indicators**: Clear focus indicators on all interactive elements
- **Screen Reader Support**: Proper ARIA labels (through WPF automation)
- **High Contrast**: Compatible with Windows High Contrast mode

## Responsive Behavior

- **Window Resizing**: All panels resize proportionally
- **GridSplitter**: User can adjust left/right panel sizes
- **Minimum Window Size**: 1400x800 pixels recommended
- **Text Wrapping**: Long text wraps properly in preview areas
